---
services:
  dockgo:
    build: .
    container_name: dockgo
    restart: unless-stopped

    # Expose DockGo on the host
    # Left side = host port
    # Right side = container port (must match PORT in .env)
    ports:
      - "${PORT:-3131}:${PORT:-3131}"

    # Load environment variables from .env file
    env_file:
      - .env

    volumes:
      # Required: Docker socket access for container discovery and updates.
      # WARNING: Grants Docker-level privileges to DockGo.
      - /var/run/docker.sock:/var/run/docker.sock

      # Required: Persistent data (sessions, cache, etc.)
      - ./data:/app/data
      
  ########################################
  # Optional: Apprise API Container
  ########################################
  # apprise:
  #   image: caronc/apprise
  #   container_name: apprise
  #   restart: unless-stopped
  #   ports:
  #     - "4747:8000"
  #   environment:
  #     - APPRISE_WORKER_COUNT=2
